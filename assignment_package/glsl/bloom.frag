#version 150
uniform sampler2D u_ShadowTexture;
uniform vec3 u_PlayerPos;
uniform ivec2 u_Dimensions;

//BLUR kernel
const float kernelG[121] = float[](0.006849, 0.007239, 0.007559, 0.007795, 0.007941, 0.00799, 0.007941, 0.007795, 0.007559, 0.007239, 0.006849, 0.007239, 0.007653, 0.00799, 0.00824, 0.008394, 0.008446, 0.008394, 0.00824, 0.00799, 0.007653, 0.007239, 0.007559, 0.00799, 0.008342, 0.008604, 0.008764, 0.008819, 0.008764, 0.008604, 0.008342, 0.00799, 0.007559, 0.007795, 0.00824, 0.008604, 0.008873, 0.009039, 0.009095, 0.009039, 0.008873, 0.008604, 0.00824, 0.007795, 0.007941, 0.008394, 0.008764, 0.009039, 0.009208, 0.009265, 0.009208, 0.009039, 0.008764, 0.008394, 0.007941, 0.00799, 0.008446, 0.008819, 0.009095, 0.009265, 0.009322, 0.009265, 0.009095, 0.008819, 0.008446, 0.00799, 0.007941, 0.008394, 0.008764, 0.009039, 0.009208, 0.009265, 0.009208, 0.009039, 0.008764, 0.008394, 0.007941, 0.007795, 0.00824, 0.008604, 0.008873, 0.009039, 0.009095, 0.009039, 0.008873, 0.008604, 0.00824, 0.007795, 0.007559, 0.00799, 0.008342, 0.008604, 0.008764, 0.008819, 0.008764, 0.008604, 0.008342, 0.00799, 0.007559, 0.007239, 0.007653, 0.00799, 0.00824, 0.008394, 0.008446, 0.008394, 0.00824, 0.00799, 0.007653, 0.007239, 0.006849, 0.007239, 0.007559, 0.007795, 0.007941, 0.00799, 0.007941, 0.007795, 0.007559, 0.007239, 0.006849);


in vec4 fs_Col;
in vec2 fs_UV;
in vec4 fs_Pos;
out vec4 out_Col;

void main()
{
//    float distance =  length(fs_Pos.xz-u_PlayerPos.xz);

////    float blurMult = smoothstep(0.0, 200.0, distance);
////    if (blurMult < 0.4 || blurMult > 0.6) {
////        blurMult = 0;
////    }

//    vec4 colAverage = texture(u_ShadowTexture, fs_UV);

//    for (int i = -5; i<6; i++) {
//        for (int j = -5; j<6; j++) {
//            float x = fs_UV.x + float(i)/u_Dimensions.x;
//            float y = fs_UV.y + float(j)/u_Dimensions.y;
//            colAverage += texture(u_ShadowTexture, vec2(x,y)) * kernelG[(i+5) + (j+5)*11] * 100;// * blurMult;
//        }
//    }
//    out_Col = colAverage;

    out_Col = texture(u_ShadowTexture, fs_UV);
}
